<!doctype html public "-//W3C//DTD HTML 4.0 Transitional //EN">
<html>
<head>
  <meta name="GENERATOR" content="mkd2html 2.2.2">
  <meta http-equiv="Content-Type"
        content="text/html; charset=utf-8">  <title></title>
</head>
<body>
<h1>Quick Guide to Install and Use FAµST Wrappers</h1>

<p><a href="#prerequisites">1. Prerequisites</a></p>

<p><a href="#installation">2. Installation</a></p>

<p><a href="#installation_testing">3. Installation Testing</a></p>

<p><a href="#usage">4. Usage</a></p>

<h2><a name="prerequisites">1. Prerequisites<a/></h2>

<h3>1.1 For Python</h3>

<p>FAµST is designed for the Python ecosystem which as usual relies on numpy and scipy packages.</p>

<p>Please ensure these packages are installed on your system. One way to install them is to use the pip program delivered with your python version.</p>

<pre><code>pip install numpy scipy
# it could be pip3 instead of pip
</code></pre>

<p>Note that you probably have to install those packages for all versions of Python you want to use (each one have normally its associated pip executable).<br/>
Note also that you can rely on your system package manager to install the Python packages (e.g. dnf/yum repositories on Fedora/Centos Linux systems).</p>

<p>FAµST supports at least Python 2.7 and is also compiled for Python @PY3_VER@.</p>

<p>If you want to use FAµST with Python 3 you must use the @PY3_VER@ exact version because the FAµST Python wrapper delivered within the binary package is compiled for that version only.</p>

<h3>1.2 For Matlab</h3>

<p>The FAµST wrapper for Matlab has been tested on several Matlab versions starting from version 2016a,b up to version 2018a,b.<br/>
However it&rsquo;s not totally excluded that FAµST works with older or newer versions.</p>

<h2><a name="installation"> 2. Installation</a></h2>

<p>@OS_SPECIFIC_INSTALL_GUIDE_INSTRUCS@</p>

<h2><a name="installation_testing">3. Testing and Troubleshooting<a/></h2>

<p>Normally, after installing, nothing is left to do. The installation process should have seamlessly set up the Faust wrappers for Python and Matlab into your environment.
Neverthless, it could be useful to check that it really worked and set the environment manually if needed like explained below.</p>

<h3>3.1 Testing the Python Wrapper</h3>

<p>To test whether the FaµST Python wrapper has been setup properly, simply open a Bash terminal and type:</p>

<pre><code>$ python2 -c "import pyfaust" &amp;&amp; echo "It works"

# it could be python2.7, python3, python@PY3_VER@ or just python,
# depending your configuration and the python version you want to use
</code></pre>

<p>NOTE: on Windows, if you use the dos/batch command prompt just remove all the trailing line starting from `&amp;&amp;&lsquo;. You won&rsquo;t see the message &ldquo;It works&rdquo; but you&rsquo;ll see possible Python errors.</p>

<p>It goes without saying that on macOS or Linux if the wrapper is set up properly you&rsquo;ll see the message &ldquo;It works&rdquo; as a result of the command above.</p>

<p>On the contrary, the following error message</p>

<pre><code>Traceback (most recent call last):
  File "&lt;string&gt;", line 1, in &lt;module&gt;
ModuleNotFoundError: No module named 'pyfaust'
</code></pre>

<p>indicates that you need to add the Python wrapper manually in your Python path:</p>

<pre><code>$ export PYTHONPATH=$PYTHONPATH:@CMAKE_INSTALL_PREFIX@/python
# and test again
$ python2 -c "import pyfaust" &amp;&amp; echo "It works"
</code></pre>

<p>If it fails again you are likely on a different version of Python. Returns to the <a href="#prerequisites">Prerequisites</a> section and check your Python environment matches FAµST requirements.
Otherwise it works but you&rsquo;ll need to set the `export' command manually in one of your startup scripts to have it set for once and for all (e.g. in ~/.bashrc if you are a Bash user).
<br/>On Windows you can set the PATH environment variable in the configuration panel (system, advanced settings).</p>

<p>Finally, note that you may get another error message indicating for example that either numpy or scipy is not available (for that issue see <a href="#prerequisites">Prerequisites</a>).</p>

<pre><code>ImportError: No module named numpy
</code></pre>

<h3>3.2 Testing the Matlab Wrapper</h3>

<p>To test whether the FAµST Matlab wrapper auto-setup succeeded at install stage, you can open a Bash terminal and type:</p>

<pre><code>$ matlab -nodisplay -nojvm -r "import matfaust.FaustFactory;F = FaustFactory.rand(1, 10, .5, 'dense', false);disp(F);exit"

# Note 1: of course, it can be other terminal/shell or command prompt
# Note 2: if matlab is not set in your PATH environment variable you need to replace `matlab' with its full path
# (e.g. on macOS /Applications/Matlab/MATLAB_R2018b.app/bin/matlab)
</code></pre>

<p>It works only if you see an output similar to:</p>

<pre><code>F =

Faust size 10x10, density 0.57, nnz_sum 57, 1 factor(s):
- FACTOR 0 (complex) DENSE, size 10x10, density 0.57, nnz 57
</code></pre>

<p>In other case it didn&rsquo;t work. So here is how to setup the wrapper manually:</p>

<p>First, you launch Matlab terminal, then you go in the FAµST directory:</p>

<pre><code>&gt;&gt; cd @CMAKE_INSTALL_PREFIX@/matlab
</code></pre>

<p>Then launch the script that is responsible to add FAµST path in your Matlab path.</p>

<pre><code>&gt;&gt; setup_FAUST
&gt;&gt; % then test again FAµST
&gt;&gt; import matfaust.FaustFactory;F = FaustFactory.rand(1, 10, .5, 'dense', false);disp(F);exit
</code></pre>

<p>For that change to be applied permanently, you need to automatize the `addpath()&lsquo; call made by setup_FAUST.<br/>
For that purpose:</p>

<ol>
<li>Look into your matlab installation directory (e.g. on macOS /Applications/Matlab/MATLAB_R2018b.app/bin/matlab), next:
<li>Go into the sub-directory toolbox/local
<li>Edit the file startup.m by adding the follwing line:
<pre>
    addpath(genpath('@CMAKE_INSTALL_PREFIX@/matlab'))
</pre>
</ol>


<p>OK! You can follow the quick start usage now.</p>

<h2><a name="usage">4. Usage<a/></h2>

<h3>4.1 Matlab Wrapper</h3>

<p>Let&rsquo;s test FAµST with the quickstart script, from a matlab terminal type:</p>

<pre><code>&gt;&gt; quick_start
</code></pre>

<p>And then type further instructions to test a bit of the FAµST API:</p>

<p>Let&rsquo;s see what variables quickstart script has added.</p>

<pre><code>&gt;&gt; whos
</code></pre>

<p>Now call some functions on FAµST object A:</p>

<pre><code>&gt;&gt; rcg(A)
&gt;&gt; density(A)
&gt;&gt; get_num_factors(A)
</code></pre>

<p>Retrieve the product factors (as full matrices):</p>

<pre><code>&gt;&gt; F1 = get_factor(A,1);
&gt;&gt; F2 = get_factor(A,2);
</code></pre>

<p>Check the sizes:</p>

<pre><code>&gt;&gt; size(F1)
&gt;&gt; size(F2)
&gt;&gt; size(A)
</code></pre>

<p>For more information on the FAµST API, and a whole function listing, consult the doc:</p>

<pre><code>&gt;&gt; doc('matfaust.Faust')
&gt;&gt; % or:
&gt;&gt; import matfaust.*;doc('Faust')
</code></pre>

<p>N.B.: to access the documentation, you need to be in the graphical interface of matlab.</p>

<p>You can also consult the doxygen doc for the API in <a href="file://@CMAKE_INSTALL_PREFIX@/doc/html/index.html">@CMAKE_INSTALL_PREFIX@/doc/html/index.html</a> from your web browser.</p>

<h3>4.2 Python Wrapper</h3>

<p>In the same spirit than the Matlab tutorial showed in the previous section, you can execute the quick start script for Python.</p>

<pre><code>$ python2.7 @CMAKE_INSTALL_PREFIX@/python/quickstart.py
</code></pre>

<p>You can also go through the Python terminal to build a FAµST product and call its object methods.</p>

<pre><code>$ python2.7
&gt;&gt;&gt; import pyfaust
&gt;&gt;&gt; A = pyfaust.Faust('@CMAKE_INSTALL_PREFIX@/python/A.mat') # A is the FAµST created through quickstart script
&gt;&gt;&gt; A.rcg()
6.666666666666667
&gt;&gt;&gt; A.density()
0.15
&gt;&gt;&gt; A.get_num_factors()
2
&gt;&gt;&gt; F1 = A.get_factor(0)
&gt;&gt;&gt; F2 = A.get_factor(1)
&gt;&gt;&gt; A.shape
(1000, 2000)
</code></pre>
</body>
</html>
